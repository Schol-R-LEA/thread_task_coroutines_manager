A simple thread/task manager using similar macros like coroutines